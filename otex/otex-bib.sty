\ProvidesExplPackage {otex/otex-bib} {2026-01-16} {1.1} {Orion's Bibliography}

% Symbol detection for bibliography packages
% \printbibliography is representative of biblatex
% \citep is representative of natbib
\bool_new:N \l_otex_bib_configured_bool

\@ifpackageloaded{biblatex}{\bool_set_true:N \l_otex_bib_configured_bool}{}
\@ifpackageloaded{natbib}{\bool_set_true:N \l_otex_bib_configured_bool}{}
\cs_if_exist:NT \printbibliography {\bool_set_true:N \l_otex_bib_configured_bool}
\cs_if_exist:NT \citep {\bool_set_true:N \l_otex_bib_configured_bool}

\bool_if:NT \l_otex_bib_configured_bool
{
  \msg_warning:nnnn { otex } { pkg-skip } { biblatex/natbib } { bibliography~already~configured }
}

\bool_if:NF \l_otex_bib_configured_bool
{
  \str_case:VnF \g_otex_bib_backend_tl
  {
    {biblatex} { \otex_require:nnnn { biblatex } { backend=bibtex, style=\g_otex_bib_style_tl, sorting=none, doi=true } {} {} }
    {natbib}   { \otex_require:nnnn { natbib } { numbers, sort&compress } {} {} }
  }
  {
    \otex_require:nnnn { biblatex } { backend=biber, style=ieee } {} {}
  }
}

\endinput
