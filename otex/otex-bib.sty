\ProvidesExplPackage {otex/otex-bib} {2025-01-16} {1.1} {Orion's Bibliography}

% ==============================================================================
% 参考文献管理 (Bibliography)
% ==============================================================================

\str_case:VnF \g_otex_bib_backend_tl
  {
    {biblatex}
    {
      % --- Smart Load BibLaTeX ---
      \otex_smart_require:nnnn { biblatex }
        {
          backend = bibtex,
          style   = \g_otex_bib_style_tl,
          sorting = none,
          doi     = true,
          isbn    = false,
          url     = false,
          eprint  = false
        }
        { } % No strict validation
        { } % Post-setup
    }
    {natbib}
    {
      % --- Smart Load Natbib ---
      \otex_smart_require:nnnn { natbib }
        { numbers, sort&compress }
        { }
        { }
    }
  }
  {
    % Default Fallback -> BibLaTeX
    \msg_warning:nnn { otex } { invalid-bib-backend } { \g_otex_bib_backend_tl }
    \otex_smart_require:nnnn { biblatex }
      { backend=biber, style=ieee }
      { }
      { }
  }

\msg_new:nnn { otex } { invalid-bib-backend } { Invalid~bib-backend~'#1'.~Defaulting~to~biblatex. }

\endinput
