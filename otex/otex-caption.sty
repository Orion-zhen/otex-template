\ProvidesExplPackage {otex/otex-caption} {2026-01-16} {1.1} {Orion's Captions}

% Symbol detection for caption
% Caption (Safe Load)
% Guard: \captionsetup
\otex_safe_require:nnnn { caption } {} { \captionsetup }
{
  % Only apply opinionated defaults if otex loaded the package (i.e. not pre-loaded)
  \bool_if:NF \l_otex_pkg_preloaded_bool
  {
    \captionsetup{ font=small, labelfont=bf, labelsep=colon, textfont=it }
  }
}

% Subcaption check - use symbol detection + conflict package detection
% If subfig/subfigure loaded, we skip.
\bool_new:N \l_otex_subcap_conflict_bool
\@ifpackageloaded{subfig}{ \bool_set_true:N \l_otex_subcap_conflict_bool } {}
\@ifpackageloaded{subfigure}{ \bool_set_true:N \l_otex_subcap_conflict_bool } {}

\bool_if:NTF \l_otex_subcap_conflict_bool
{ \msg_warning:nnnn { otex } { pkg-skip } { subcaption } { subfig/subfigure~package~loaded } }
{
  % Guard: \subcaptionbox
  \otex_safe_require:nnnn { subcaption } {} { \subcaptionbox } {}
}

\endinput
