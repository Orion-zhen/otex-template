\ProvidesExplPackage {otex/otex-caption} {2026-01-16} {1.1} {Orion's Captions}

% Symbol detection for caption
\cs_if_exist:NTF \captionsetup 
  { \msg_warning:nnnn { otex } { pkg-skip } { caption } { \\captionsetup~already~defined } }
  { \otex_require:nnnn { caption } {} {} {} }

\@ifpackageloaded{caption}
{
  \captionsetup{ font=small, labelfont=bf, labelsep=colon, textfont=it }
}
{}

% Subcaption check - use symbol detection + conflict package detection
\bool_new:N \l_otex_subcap_conflict_bool
\@ifpackageloaded{subfig}{ \bool_set_true:N \l_otex_subcap_conflict_bool } {}
\@ifpackageloaded{subfigure}{ \bool_set_true:N \l_otex_subcap_conflict_bool } {}

\bool_if:NTF \l_otex_subcap_conflict_bool
{ \msg_warning:nnnn { otex } { pkg-skip } { subcaption } { subfig/subfigure~package~loaded } }
{ 
  \cs_if_exist:NTF \subcaptionbox 
    { \msg_warning:nnnn { otex } { pkg-skip } { subcaption } { \\subcaptionbox~already~defined } }
    { \otex_require:nnnn { subcaption } {} {} {} } 
}

\endinput
