\ProvidesExplPackage {otex/otex-caption} {2025-01-16} {1.1} {Orion's Captions}

% ==============================================================================
% 标题设置 (Captions)
% ==============================================================================

\msg_new:nnn { otex } { subcaption-clash }
  { Incompatible~package~'subfig'~or~'subfigure'~or~class~'CjC'~detected.~Skipping~'subcaption'. }

\@ifpackageloaded { caption }
  {
    \otex_smart_require:nnnn { caption } { } { } { }
    \msg_info:nnn { otex } { config-backoff } { caption }
  }
  {
    \otex_smart_require:nnnn { caption }
      { } 
      { } 
      {
        \captionsetup{
            font      = small,
            labelfont = bf,
            labelsep  = colon,
            textfont  = it
        }
      }
  }

% --- Smart Load Subcaption (Conflict Check) ---
\@ifclassloaded{CjC}
  { \msg_warning:nn { otex } { subcaption-clash } }
  {
    \@ifpackageloaded { subfig }
      { \msg_warning:nn { otex } { subcaption-clash } }
      {
        \@ifpackageloaded { subfigure }
          { \msg_warning:nn { otex } { subcaption-clash } }
          {
            \otex_smart_require:nnnn { subcaption } { } { } { }
          }
      }
  }



\endinput
