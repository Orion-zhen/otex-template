\ProvidesExplPackage {otex/otex-fonts} {2025-01-16} {1.1} {Orion's Font Configuration - Minimalist}

\bool_if:NF \g_otex_load_fonts_bool { \endinput }

% Resolve auto preset
\str_if_eq:VnT \g_otex_font_set_tl { auto }
  {
    \tl_gset:Nn \g_otex_font_set_tl { none }
    \clist_map_inline:nn { article, report, book, ctexart, ctexrep, ctexbook }
      {
        \@ifclassloaded { #1 } { \tl_gset:Nn \g_otex_font_set_tl { windows } } {}
      }
  }

\str_if_eq:VnT \g_otex_font_set_tl { none } { \endinput }

\RequirePackage { fontspec }

% Helper
\cs_new:Nn \otex_set_font:nnn
  {
    \tl_if_empty:NTF #1 { #2 { #3 } } { #2 { #1 } }
  }

% Presets
\str_case:Vn \g_otex_font_set_tl
  {
    {windows}
    {
      \otex_set_font:nnn \g_otex_font_main_tl \setmainfont { Times~New~Roman }
      \otex_set_font:nnn \g_otex_font_sans_tl \setsansfont { Arial }
      \otex_set_font:nnn \g_otex_font_mono_tl \setmonofont { Courier~New }
    }
    {linux}
    {
      \otex_set_font:nnn \g_otex_font_main_tl \setmainfont { Liberation~Serif }
      \otex_set_font:nnn \g_otex_font_sans_tl \setsansfont { Liberation~Sans }
      \otex_set_font:nnn \g_otex_font_mono_tl \setmonofont { Liberation~Mono }
    }
    {adobe}
    {
      \otex_set_font:nnn \g_otex_font_main_tl \setmainfont { Adobe~Garamond~Pro }
      \otex_set_font:nnn \g_otex_font_sans_tl \setsansfont { Myriad~Pro }
      \otex_set_font:nnn \g_otex_font_mono_tl \setmonofont { Source~Code~Pro }
    }
  }

% CJK
\bool_if:NT \g_otex_load_ctex_bool
  {
     \@ifpackageloaded{xeCJK}
     {
        \tl_if_empty:NTF \g_otex_font_cjk_main_tl
          {
             \str_case:VnF \g_otex_font_set_tl
               {
                 {linux} { \setCJKmainfont { Noto~Serif~CJK~SC } \setCJKsansfont { Noto~Sans~CJK~SC } }
                 {adobe} { \setCJKmainfont { Adobe~Song~Std }    \setCJKsansfont { Adobe~Heiti~Std } }
               }
               { \setCJKmainfont { SimSun } \setCJKsansfont { SimHei } }
          }
          { \setCJKmainfont { \g_otex_font_cjk_main_tl } }
     }
     {}
  }

% Math
\@ifpackageloaded{unicode-math} { \setmathfont{DejaVu~Math~TeX~Gyre} } {}

\endinput
