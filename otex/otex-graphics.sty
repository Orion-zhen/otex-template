\ProvidesExplPackage {otex/otex-graphics} {2025-01-16} {1.1} {Orion's Graphics}

% ==============================================================================
% 基础绘图包
% ==============================================================================
% Smart require for standard packages
\otex_smart_require:nnnn { graphicx } {} {} {}
\otex_smart_require:nnnn { tcolorbox } {} {} {}

% ==============================================================================
% TikZ 绘图系统
% ==============================================================================
\otex_smart_require:nnnn { tikz } {} {} 
  {
    % Suspend ExplSyntax for TikZ library loading to ensure catcodes are correct
    % for internal PGF file reading.
    \ExplSyntaxOff
    \usetikzlibrary{
        shapes, arrows.meta, positioning, calc, patterns,
        decorations.pathreplacing, decorations.markings,
        quotes, fit, backgrounds, shadows, trees, mindmap
    }
    
    % TikZ 常用样式预定义
    % Note: Using ~ for spaces in keys because the arguments are tokenized
    % while ExplSyntaxOn is active in this file!
    \tikzset{
        base/.style = {draw, align=center, minimum~height=2em, minimum~width=2em},
        process/.style = {base, rectangle, rounded~corners, fill=orange!10},
        decision/.style = {base, diamond, aspect=2, fill=blue!10, inner~sep=0pt},
        io/.style = {base, trapezium, trapezium~left~angle=70, trapezium~right~angle=110, fill=green!10},
        startstop/.style = {base, rounded~rectangle, fill=red!10},
        arrow/.style = {thick, ->, >=Stealth},
        line/.style = {thick}
    }
    \ExplSyntaxOn
  }

% ==============================================================================
% PGFPlots 高级绘图库
% ==============================================================================
\otex_smart_require:nnnn { pgfplots } {} {}
  {
    % similarly for pgfplots libraries
    \ExplSyntaxOff
    \pgfplotsset{compat=1.18}
    \usepgfplotslibrary{fillbetween, polar}
    \ExplSyntaxOn
  }

\endinput
