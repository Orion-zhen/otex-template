\ProvidesExplPackage {otex/otex-layout} {2025-01-16} {1.1} {Orion's Layout}

% ==============================================================================
% 页面布局与页眉页脚 (Layout)
% ==============================================================================
% 仅在 article 类生效，避免冲突

\@ifclassloaded { article }
  {
    \RequirePackage { geometry }
    \geometry{
        a4paper,
        left   = 2.5cm,
        right  = 2.5cm,
        top    = 2.5cm,
        bottom = 2.5cm
    }

    \RequirePackage { fancyhdr }
    \pagestyle { fancy }
    \fancyhf{}
    \lhead { \leftmark }       % 左页眉: 章节名
    \chead {}                  % 中页眉: 空
    \rhead { \thepage }        % 右页眉: 页码
    \lfoot {}                  % 左页脚
    \cfoot {}                  % 中页脚
    \rfoot {}                  % 右页脚
  }
  {}

% ==============================================================================
% 浮动体控制 (Floats)
% ==============================================================================

\RequirePackage { placeins } % 提供 \FloatBarrier
\RequirePackage { flafter }  % 确保浮动体不会出现在定义之前

% 如果开启了 floats-in-section，则修改 section 命令自动添加 Barrier
\bool_if:NT \g_otex_float_section_bool
  {
    \AddToHook{cmd/section/before}{\FloatBarrier}
  }

\endinput
