\ProvidesExplPackage {otex/otex-math} {2025-01-16} {1.1} {Orion's Math Enhancements - Minimalist}

\otex_require:nnnn { amsmath } {} {} {}
\otex_require:nnnn { mathtools } {} {} {}
\otex_require:nnnn { amsthm } {} {} {}

\msg_new:nnn { otex } { amssymb-conflict } { Package~'amssymb'~conflict~with~'unicode-math'. }

% Logic: If pdfTeX or Conflict Class -> Standard. Else -> Unicode Math.
\bool_new:N \l_otex_math_conflict_bool
\clist_map_inline:nn { acmart, IEEEtran, elsarticle, CjC }
  { \@ifclassloaded{#1}{ \bool_set_true:N \l_otex_math_conflict_bool } {} }

\bool_lazy_or:nnTF { \sys_if_engine_pdftex_p: } { \l_otex_math_conflict_bool }
  {
    \otex_require:nnnn { amsmath } {} {} {}
    % Load amssymb unless acmart (which has own symbols)
    \@ifclassloaded{acmart} {} { \otex_require:nnnn { amssymb } {} {} {} }
  }
  {
     % Unicode Math
     \@ifpackageloaded{amssymb} { \msg_warning:nn { otex } { amssymb-conflict } } {}
     
     \otex_require:nnnn { unicode-math } { math-style=ISO, bold-style=ISO } {} {}
     
     \AtBeginDocument{
       \otex_provide_command:Nnn \square { } { \mdlgwhtsquare }
       \otex_provide_command:Nnn \boxtimes { } { \boxtimes }
     }
  }

\endinput
